# Phase 2 快速操作指南

## 📋 操作清单

### ✅ 步骤 1：创建集合（4个）
- [ ] `robots`
- [ ] `telemetry_latest`
- [ ] `faults`
- [ ] `commands`

### ✅ 步骤 2：创建索引

#### robots 集合
- [ ] `robotCode`（唯一索引）

#### telemetry_latest 集合
- [ ] `robotCode`（普通索引）
- [ ] `ts`（降序索引）

#### faults 集合
- [ ] `robotCode` + `ts`（复合索引，ts 降序）

#### commands 集合
- [ ] `robotCode` + `ts`（复合索引，ts 降序）

### ✅ 步骤 3：导入初始化数据
- [ ] robots 集合：导入 `初始化数据-robots.json`
- [ ] telemetry_latest 集合：导入 `初始化数据-telemetry_latest.json`
- [ ] faults 集合：导入 `初始化数据-faults.json`
- [ ] commands 集合：导入 `初始化数据-commands.json`（可选）

### ✅ 步骤 4：验证数据
- [ ] 在控制台查看各集合数据
- [ ] 运行 `验证查询.jql` 文件中的查询语句

---

## 🔗 相关文件

- 📄 **数据库设计文档.md** - 完整的字段设计和说明
- 📄 **初始化数据-robots.json** - robots 集合初始化数据
- 📄 **初始化数据-telemetry_latest.json** - telemetry_latest 集合初始化数据
- 📄 **初始化数据-faults.json** - faults 集合初始化数据
- 📄 **初始化数据-commands.json** - commands 集合初始化数据
- 📄 **验证查询.jql** - 验证查询语句集合

---

## ⚡ 快速验证命令

在 uniCloud 控制台的「云数据库」→「数据库」→ 选择集合 → 「数据」标签页，可以直接执行以下查询：

### 基础验证
```javascript
// 查看所有机器人
db.collection('robots').get()

// 查看 ROBOT-001 的遥测数据
db.collection('telemetry_latest').where({robotCode: 'ROBOT-001'}).get()

// 查看 ROBOT-001 的故障
db.collection('faults').where({robotCode: 'ROBOT-001'}).get()
```

---

## 📝 注意事项

1. **时间戳**：使用毫秒级时间戳（Number 类型）
2. **唯一性**：`robots.robotCode` 必须唯一
3. **导入数据**：不要包含 `_id` 字段，系统自动生成
4. **索引顺序**：复合索引中 `robotCode` 在前，`ts` 在后
